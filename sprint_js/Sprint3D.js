// ***
// *** Sprint 1 - Static Binary Translation to JavaScript
// ***            by Norbert Kehrer in August2015
// ***

var SEPARATION=16,AMOUNTX=32,AMOUNTY=24,container,stats,camera,scene,renderer,particle,mouseX=0,mouseY=0,windowHalfX=256,windowHalfY=224,look_target=new THREE.Vector3(1,0,0),car3D=[],dot3D=[],emptyDot,fullDot,dotMaterial,oil3D=[],hud=document.getElementById("my3DHUDDiv"),dot_add=[[1,5,5,5],[1,5,-1E5,-1E5],[1,1,1,5],[1,1,-1E5,-1E5],[1,1,5,1],[5,1,-1E5,-1E5],[5,1,5,5],[5,5,-1E5,-1E5]],angle3D_x=[0,20,38,56,71,83,92,98,100,98,92,83,71,56,38,20,0,-20,-38,-56,-71,-83,-92,-98,-100,-98,-92,-83,-71,-56,-38,
-20],angle3D_y=[-100,-98,-92,-83,-71,-56,-38,-20,0,20,38,56,71,83,92,98,100,98,92,83,71,56,38,20,0,-20,-38,-56,-71,-83,-92,-98];init3D();animate3D();
function init3D(){container=document.getElementById("my3DCanvasDiv");camera=new THREE.PerspectiveCamera(75,512/448,1,1E4);camera.position.x=256;camera.position.y=300;camera.position.z=500;scene=new THREE.Scene;var a=new THREE.SpriteMaterial;emptyDot=new THREE.Sprite(a);emptyDot.scale.x=4;emptyDot.scale.y=2;emptyDot.position.x=1E5;emptyDot.position.z=1E5;for(var b=0;32>b;b++){dot3D[b]=[];for(var c=0;24>c;c++){dot3D[b][c]=[0,1];for(var e=0;2>e;e++)dot3D[b][c][e]=new THREE.Sprite(a),dot3D[b][c][e].scale.x=
2,dot3D[b][c][e].scale.y=2,dot3D[b][c][e].position.x=16*b,dot3D[b][c][e].position.z=16*c+48,scene.add(dot3D[b][c][e])}}a=new THREE.Shape;a.moveTo(0,16);a.quadraticCurveTo(16,16,16,0);a.quadraticCurveTo(16,-16,0,-16);a.quadraticCurveTo(-16,-16,-16,0);a.quadraticCurveTo(-16,16,0,16);a=new THREE.ShapeGeometry(a);c=new THREE.MeshBasicMaterial({color:1118481,side:THREE.DoubleSide});for(b=0;2>b;b++)oil3D[b]=new THREE.Mesh(a,c),oil3D[b].position.x=200*b,oil3D[b].position.y=0,oil3D[b].position.z=200*b,oil3D[b].rotation.x=
Math.PI/2,scene.add(oil3D[b]);var a=new THREE.Geometry,b=new THREE.Vector3(-3,0,8),c=new THREE.Vector3(3,0,8),e=new THREE.Vector3(3,3,8),d=new THREE.Vector3(-3,3,8),f=new THREE.Vector3(-3,0,-8),h=new THREE.Vector3(3,0,-8);a.vertices.push(b);a.vertices.push(c);a.vertices.push(e);a.vertices.push(d);a.vertices.push(f);a.vertices.push(h);a.faces.push(new THREE.Face3(0,1,3));a.faces.push(new THREE.Face3(1,2,3));a.faces.push(new THREE.Face3(1,2,5));a.faces.push(new THREE.Face3(0,3,4));a.faces.push(new THREE.Face3(3,
4,5));a.faces.push(new THREE.Face3(3,2,5));a.computeFaceNormals();a.computeVertexNormals();a.computeBoundingSphere();a.computeBoundingBox();c=[];c[0]=new THREE.MeshLambertMaterial({color:16711680});c[0].overdraw=.5;c[0].side=THREE.DoubleSide;c[1]=new THREE.MeshLambertMaterial({color:65280});c[1].overdraw=.5;c[1].side=THREE.DoubleSide;c[2]=new THREE.MeshLambertMaterial({color:5592575});c[2].overdraw=.5;c[2].side=THREE.DoubleSide;c[3]=new THREE.MeshLambertMaterial({color:16776960});c[3].overdraw=.5;
c[3].side=THREE.DoubleSide;e=new THREE.CylinderGeometry(2,2,4,8);d=new THREE.MeshLambertMaterial({color:3355443});d.overdraw=.5;d.side=THREE.DoubleSide;for(var f=[5,-5,-5,5],h=[-2,5,-2,5],g=[],b=0;4>b;b++){car3D[b]=new THREE.Group;car3D[b].add(new THREE.Mesh(a,c[b]));for(var k=0;4>k;k++)g[k]=new THREE.Mesh(e,d),g[k].rotation.z=-Math.PI/2,g[k].position.x=f[k],g[k].position.z=h[k],car3D[b].add(g[k]);car3D[b].position.x=0;car3D[b].position.z=32*b;scene.add(car3D[b])}a=new THREE.DirectionalLight(16777215,
1);a.position.set(.5,1,0);scene.add(a);renderer=new THREE.CanvasRenderer;renderer.setPixelRatio(window.devicePixelRatio);renderer.setSize(512,448);renderer.setClearColor(7829503,1);container.appendChild(renderer.domElement);hud=document.getElementById("my3DHUDDiv")}function animate3D(){requestAnimationFrame(animate3D);render3D()}
function render3D(){var a,b,c,e,d,f,h,g;for(d=g=0;24>d;d++)for(f=0;32>f;f++)a=mem[1024+32*(d+3)+f],a&=63,c=16*f,e=16*(d+3),40<=a&&47>=a?(b=a-40,dot3D[f][d][0].position.x=c+2*dot_add[b][0],dot3D[f][d][0].position.z=e+2*dot_add[b][1],dot3D[f][d][1].position.x=c+2*dot_add[b][2],dot3D[f][d][1].position.z=e+2*dot_add[b][3]):(dot3D[f][d][0].position.x=-1E5,dot3D[f][d][0].position.z=-1E5,dot3D[f][d][1].position.x=-1E5,dot3D[f][d][1].position.z=-1E5),60===a&&(oil3D[g].position.x=c+16,oil3D[g].position.y=
-1,oil3D[g].position.z=e+16,g++,g&=1);for(d=0;4>d;d++)a=mem[2*d+1945]>>3&31,0===d&&(h=a),c=2*(248-mem[1936+d]),e=2*(248-mem[1944+2*d]),car3D[d].position.x=c+8,car3D[d].position.z=e+8,car3D[d].rotation.y=2*Math.PI-2*a*Math.PI/32;camera.position.y=40;camera.position.x=car3D[0].position.x-angle3D_x[h]/3;camera.position.z=car3D[0].position.z-angle3D_y[h]/3;look_target.x=camera.position.x+angle3D_x[h];look_target.z=camera.position.z+angle3D_y[h];camera.lookAt(look_target);renderer.render(scene,camera);
b="";for(d=0;32>d;d++)a=mem[1024+d],a&=127,b+=String.fromCharCode(a+0);c="";for(d=0;32>d;d++)a=mem[1056+d],a&=127,c+=String.fromCharCode(a+0);e="";for(d=0;32>d;d++)a=mem[1888+d],a&=127,e+=String.fromCharCode(a+0);b=b.replace(/\s/g,"&nbsp;");c=c.replace(/\s/g,"&nbsp;");e=e.replace(/\s/g,"&nbsp;");hud.innerHTML=b+"<br>"+c+"<br>"+e+"<br>Gear = "+gear};